<!DOCTYPE html>
<!-- dancing -->
<html>
	<head>
		<script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
		<script src="//cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
		<script src="js/aframe-text-geometry-component.min.js"></script>
	</head>
	<body>
		<a-scene background="color: #ECECEC">
			<a-assets>
				<a-asset-item id="knight"
					      src="models/knight.gltf">
				</a-asset-item>
				<a-asset-item id="optimerRegular" 
					      src="models/helvetiker_regular.typeface.json">
				</a-asset-item>
			</a-assets>
			<a-entity position="-0.65 2.75 -3"
				  text-geometry="font: #optimerRegular;  
				  size: 0.1; 
				  height: 0.05;
				  bevelEnabled: true;
				  bevelSize: 0.02;
				  bevelThickness: 0.02;
				  value: Templarske tajemne pivo"
				  material="color: #800000"></a-entity>
			
			<a-gltf-model id="knight_model"
				      position="0 0 -3.5"
				      scale="0.25 0.25 0.25"
				      src="#knight"
				      animation-mixer="clip: hello; loop: once">
			</a-gltf-model>
		      	<a-light id="directionalLight"
				 type="directional"
				 color="#FFF"
				 intensity="3.5"
				 position="0.3 2.2 1.2">
			</a-light>
		</a-scene>
		<script>
			let knight_model = document.getElementById('knight_model');
			knight_model.addEventListener('animation-finished',function() {
				knight_model.setAttribute('animation-mixer',{clip: "dancing",loop: "repeat"});
				var sceneEl = document.querySelector('a-scene');
				var newEnt = document.createElement('a-entity');
				newEnt.setAttribute('position', "1.75 2 -3");
				newEnt.setAttribute("position", "0 0 325");
				newEnt.setAttribute('text-geometry', {font: "#optimerRegular", size: 0.2, height: 0.1, bevelEnabled: true, bevelSize: 0.02, bevelThickness: 0.02, value: "DANCE"});
				newEnt.setAttribute("material", {color: "#903091"});
				newEnt.setAttribute("animation", {property: "position", to: "1.75 2 -1.5", dur: 2000, easing: "linear", loop: true});
				sceneEl.appendChild(newEnt);
			});
		</script>
	</body>
</html>
