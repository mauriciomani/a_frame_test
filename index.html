<!DOCTYPE html>
<!-- dancing -->
<html>
	<head>
		<script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
		<script src="//cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
		<script src="js/aframe-text-geometry-component.min.js"></script>
		<script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
	</head>
	<body>
		<!-- No longer need background="color: #ECECEC" -->
		<a-scene embedded arjs>
			<a-assets>
				<a-asset-item id="knight"
					      src="models/knight.gltf">
				</a-asset-item>
				<a-asset-item id="optimerRegular" 
					      src="models/helvetiker_regular.typeface.json">
				</a-asset-item>
			</a-assets>
			<a-nft type="nft"
			       url="test/models/tracker/templarske_img"
			       smooth="true"
			       smoothCount="10"
			       smoothTolerance=".01"
			       smoothThreshold="5">
				<a-entity position="-0.45 1.85 -3"
				  	  text-geometry="font: #optimerRegular;  
				  	  size: 0.05; 
				  	  height: 0.025;
				  	  bevelEnabled: true;
				  	  bevelSize: 0.01;
				  	  bevelThickness: 0.02;
				  	  value: Templarske tajemne pivo"
				  	  material="color: #800000"></a-entity>
			
				<a-gltf-model id="knight_model"
					      position="0 0.7 -3.5"
					      scale="0.1 0.1 0.1"
					      src="#knight"
					      animation-mixer="clip: hello; loop: once">
				</a-gltf-model>
				<a-light id="directionalLight"
					 type="directional"
					 color="#FFF"
					 intensity="3.5"
					 position="0.3 2.2 1.2">
				</a-light>
			</a-nft>
			<a-entity camera></a-entity>
		</a-scene>
		<script>
			let knight_model = document.getElementById('knight_model');
			knight_model.addEventListener('animation-finished',function() {
				knight_model.setAttribute('animation-mixer',{clip: "dancing",loop: "repeat"});
				var sceneEl = document.querySelector('a-scene');
				var newEnt = document.createElement('a-entity');
				newEnt.setAttribute('position', "0.25 1.6 -3.5");
				newEnt.setAttribute("rotation", "0 0 325");
				newEnt.setAttribute('text-geometry', {font: "#optimerRegular", size: 0.085, height: 0.05, bevelEnabled: true, bevelSize: 0.01, bevelThickness: 0.08, value: "DANCE"});
				newEnt.setAttribute("material", {color: "#903091"});
				newEnt.setAttribute("animation", {property: "position", from: "0.25 1.6 -3.5", to: "0.25 1.6 -2.5", delay: 500, dur: 500, direction: "alternate", easing: "linear", loop: true});
				sceneEl.appendChild(newEnt);
			});
		</script>
	</body>
</html>
